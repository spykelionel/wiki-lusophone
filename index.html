<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Lionel Afanyu - Task 1</title>
    <style>
      .block {
        background-color: gainsboro;
        padding: 1em;
      }
    </style>
  </head>
  <body>
    <h1>Lionel Afanyu - Task 1</h1>
    <h2>My code:</h2>
    <p id="code" class="block"></p>
    <h2>Results of my code:</h2>
    <p id="results" class="block"></p>
    <script id="task_id">
      let data = [
        {
          page_id: 6682420,
          creation_date: "2021-09-13",
          title: "André Baniwa",
        },
        {
          page_id: 4246775,
          creation_date: "2013-12-10",
          title: "Benki Piyãko",
        },
        {
          page_id: 5882073,
          creation_date: "2018-12-03",
          title: "Célia Xakriabá",
        },
        {
          page_id: 6977673,
          creation_date: "2022-10-05",
          title: "Chirley Pankará",
        },
        {
          page_id: 7069044,
          creation_date: "2023-02-16",
          title: "Cristine Takuá",
        },
        {
          page_id: 2119511,
          creation_date: "2009-01-28",
          title: "Eliane Potiguara",
        },
        {
          page_id: 6714407,
          creation_date: "2021-10-09",
          title: "Jaider Esbell",
        },
        {
          page_id: 6977117,
          creation_date: "2022-10-04",
          title: "Jerônimo Rodrigues",
        },
        {
          page_id: 6935831,
          creation_date: "2022-08-02",
          title: "Nanblá Gakran",
        },
        {
          page_id: 4908665,
          creation_date: "2015-11-13",
          title: "Sônia Guajajara",
        },
        {
          page_id: 5886895,
          creation_date: "2018-12-12",
          title: "Vãngri Kaingáng",
        },
        {
          page_id: 6549130,
          creation_date: "2021-04-10",
          title: "Zezico Guajajara",
        },
      ];

      (function () {
        // Use the browser's default locale and timezone for date formatting
        const dateFormatter = new Intl.DateTimeFormat(undefined, {
          year: "numeric",
          month: "long",
          day: "numeric",
        });

        // Process each entry in the data array
        const formattedEntries = data.map((item) => {
          // Split the ISO date string into components (YYYY-MM-DD)
          // Note: We avoid parsing the date as UTC or any defined format to respect the user's local timezone.
          const [year, month, day] = item.creation_date.split("-");

          // Create a Date object in the user's local timezone.
          // Months are 0-indexed in JavaScript, so we subtract 1.
          const date = new Date(year, month - 1, day);

          // Format the date according to the user's locale (e.g., "September 13, 2021" in en-US)
          const formattedDate = dateFormatter.format(date);

          // Generate the formatted string for this entry
          return `Article "${item.title}" (Page ID ${item.page_id}) was created at ${formattedDate}.`;
        });

        // Display the results in the HTML
        document.getElementById("results").innerHTML =
          formattedEntries.join("<br>");
      })();
    </script>
    <script>
      document.getElementById("code").innerText =
        document.getElementById("task_id").text;
    </script>
  </body>
</html>
